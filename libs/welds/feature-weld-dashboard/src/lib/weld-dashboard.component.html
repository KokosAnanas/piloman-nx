<div class="p-4">
  <!-- Заголовок страницы с кнопкой "Назад" -->
  <div class="flex items-center gap-4 mb-6">
    <p-button
      icon="pi pi-arrow-left"
      severity="secondary"
      [text]="true"
      routerLink="/welds"
      pTooltip="Вернуться к реестру"
    />
    @if (weld()) {
      <h1 class="text-2xl font-bold">
        Дашборд стыка: {{ weld()!.weldNumber }}
      </h1>
    } @else if (loading()) {
      <h1 class="text-2xl font-bold text-surface-500">Загрузка...</h1>
    } @else {
      <h1 class="text-2xl font-bold">Дашборд стыка: {{ weldId() }}</h1>
    }
  </div>

  <!-- Индикатор загрузки -->
  @if (loading()) {
    <div class="flex justify-center items-center p-8">
      <i class="pi pi-spin pi-spinner text-4xl text-primary"></i>
    </div>
  }

  <!-- Сообщение об ошибке -->
  @if (error()) {
    <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400">
      <i class="pi pi-exclamation-triangle mr-2"></i>
      {{ error() }}
    </div>
  }

  <!-- Контент дашборда -->
  @if (weld() && !loading()) {
    <!-- Fluid grid: две колонки на desktop, одна на mobile -->
    <!-- @see https://primeng.org/fluid -->
    <div class="flex flex-col lg:flex-row gap-4">
      <!-- Левая колонка: Параметры стыка -->
      <div class="w-full lg:w-1/2">
        <app-weld-params-widget [weldId]="weldId()" [weld]="weld()" />
      </div>

      <!-- Правая колонка: Заключения + Нормы отбраковки -->
      <div class="w-full lg:w-1/2 flex flex-col gap-4">
        <app-ndt-reports-widget [weldId]="weldId()" />
        <app-ndt-norms-widget [weldId]="weldId()" />
      </div>
    </div>
  }
</div>