# Задача: навигация в дашборд стыка и компоновка виджетов

Ты работаешь в монорепозитории **Nx** (`piloman‑nx`). В домене `libs/welds/*` уже есть страница‑реестр `WeldsComponent`, где отображается таблица стыков (PrimeNG `<p‑table>`). Твоё задание — реализовать переход по клику на строку этой таблицы в страницу‑дашборд конкретного стыка и сверстать сам дашборд в соответствии с дизайн‑системой проекта.

## 1) Добавь наведение и клик на строку таблицы

Найди компонент/шаблон, где строится таблица стыков. Сейчас она отображается как обычный `<p‑table>` без ховера и выбора строки — убедиться можно в шаблоне `welds.component.html`, где таблица описана только с параметрами `value`, `loading`, `paginator` и т. д.【590160456519089†L41-L50】.  
Нужно:

* Включить подсветку строки на ховер и возможность выбрать одну строку. Для этого на `p‑table` добавь атрибуты:
  * `[rowHover]="true"` — чтобы при наведении подсвечивалась строка.
  * `selectionMode="single"` и `dataKey="id"` — выбор одной строки по её идентификатору.
  * `[metaKeySelection]="false"` — клик без Ctrl/⌘ сразу выбирает строку.
* На строке body (`<tr>`) добавь Tailwind‑класс `cursor-pointer` для визуального указания кликабельности. Опционально можно добавить `hover:bg-black/5 dark:hover:bg-white/5` для мягкой подсветки (не забудь, что стили должны быть только в `class="..."`).
* Обработай событие выбора строки. У компонента `<p‑table>` есть событие `onRowSelect` (или можно использовать `selectionChange`), которое отдаёт выбранную запись. В обработчике считывай `id` стыка и вызывай `router.navigate()` на маршрут дашборда (`/welds/:weldId/dashboard`). Помни, что элементы управления внутри строки (кнопка удаления, ссылки, инпуты) не должны инициировать переход — добавь `(click)="$event.stopPropagation()"` на такие элементы.

## 2) Маршрутизация и архитектура Nx

Как и во всём репозитории, разделяй код по границам:

* **`apps/web`** содержит только верхнеуровневую настройку: инициализацию Angular, подключения PrimeNG, конфиг тем, а также объявление маршрутов. Никакой бизнес‑логики здесь быть не должно.
* **Новая фича дашборда** должна быть отдельной библиотекой, например `libs/welds/feature‑weld‑dashboard`. Создай standalone‑компонент `WeldDashboard` и экспортируй его маршруты через `index.ts`, чтобы можно было подключить lazy‑route.
* В `apps/web/src/app/app.routes.ts` добавь ленивая загрузка маршрута `/welds/:weldId/dashboard`, который подгружает модуль/компонент из `feature‑weld‑dashboard`. Это позволит держать дашборд в границах домена и не тянуть его в основной бандл.

## 3) Шаблон страницы дашборда

Страница дашборда должна быть реализована на основе PrimeNG `<p‑fluid>` (fluid grid) и состоять из нескольких виджетов-карточек. Заголовок страницы должен отображать номер/ID стыка. Ниже сделай разметку в две колонки (адаптивно):

* **Левая колонка** (`w-full lg:w-1/2`) — виджет с параметрами стыка (`<app-weld-params-widget>`). Это может быть, например, таблица или список характеристик стыка.  
* **Правая колонка** (`w-full lg:w-1/2 flex flex-col gap-4`) — два виджета один под другим: 
  * виджет «заключения» (например `<app-ndt-reports-widget>`),
  * виджет «нормы отбраковки» (например `<app-ndt-norms-widget>`).

Общий контейнер дашборда можно сделать `class="flex flex-col lg:flex-row gap-4"`, чтобы виджеты располагались в колонке на мобильных устройствах и в две колонки на десктопах. Используй только Tailwind‑классы в атрибуте `class="..."` — никаких `style` или scss. Виджеты должны быть реализованы как отдельные standalone‑компоненты в домене `welds` (см. пункт ниже).

## 4) Виджеты как отдельные компоненты

Создай три самостоятельных UI‑компонента (standalone) в `libs/welds/ui-*`:

1. **Параметры стыка** – `libs/welds/ui-weld-params-widget` с селектором `<app-weld-params-widget>`.
2. **Заключения** – `libs/welds/ui-ndt-reports-widget` с селектором `<app-ndt-reports-widget>`.
3. **Нормы отбраковки** – `libs/welds/ui-ndt-norms-widget` с селектором `<app-ndt-norms-widget>`.

Каждый виджет должен:

* Быть standalone‑компонентом, импортировать необходимые модули PrimeNG (`CardModule`) и общие UI‑компоненты.
* Иметь шаблон вида `<p-card>…</p-card>`, где внутри будет верстка содержимого (можно пока оставить заглушки или TODO). Заголовок `<p-card>` должен описывать, что за виджет.
* Принимать входной параметр `@Input() weldId: string`, чтобы в дальнейшем подгружать данные конкретного стыка.
* Использовать только Tailwind‑классы для стилизации. Например, внешний контейнер `class="p-card w-full"`, внутренние отступы через `p-4` и т. д.

## 5) Учёт тем и пресетов (Sakai‑ng)

В проекте уже есть система управления темами, основанная на PrimeNG styled‑mode и пресетах Aura/Lara/Nora. Типы доступных пресетов объявлены в `libs/core/theme/src/lib/theme.models.ts` и включают три значения — `Aura`, `Lara` и `Nora`【452105309996359†L2-L8】. При разработке дашборда не добавляй «жёсткие» цвета. Полагайся на CSS‑переменные PrimeNG и Tailwind‑классы (`bg-surface-0`, `text-color`, `border-color` и т. д.), чтобы дашборд корректно выглядел во всех пресетах и с выбранным primary‑цветом.  
Также помни, что в проекте используется dark‑mode. Выбор preset/primary цвета должен автоматически менять вид карточек и таблицы благодаря styled‑mode — никаких inline‑стилей.

## 6) Подготовка данных

Если в домене `welds` уже существует библиотека `data-access` со службой `WeldsApiService` (используется для списка стыков), добавь в неё метод для получения подробных данных о стыке (`getById(id)`). Можно вернуть заглушку или `TODO` — главное подготовить интерфейс для виджетов. При необходимости заведи signals‑store в `libs/welds/store` для хранения состояния текущего стыка.

## Acceptance Criteria

* При наведении на строку таблицы стыков курсор меняется, строка подсвечивается; клик выбирает строку без зажатия Ctrl/⌘.
* Клик по строке открывает `/welds/:weldId/dashboard`; элементы управления внутри строки не инициируют переход.
* Маршрут `/welds/:weldId/dashboard` загружается лениво из библиотеки `feature‑weld‑dashboard`.
* На странице дашборда заголовок отображает номер/ID стыка; под ним в `<p‑fluid>` расположены три виджета‑карточки: слева один, справа два друг под другом.
* Виджеты реализованы как отдельные standalone‑компоненты в `libs/welds/ui-*`; шаблон каждого виджета использует `<p-card>`.
* Все стили задаются через Tailwind в атрибуте `class="..."`; внешний вид корректно наследует пресет/primary‑цвет из темы (Aura, Lara, Nora)【452105309996359†L2-L8】.
* Код и файлы разделены по архитектурным границам Nx: `apps/web` — только маршруты и конфигурации, `libs/welds/*` — бизнес‑логика и UI компонентов.
